Mask R-CNN:

1. 添加一个与现有目标检测框回归并行的，用于预测目标掩码的分支来扩展Faster R-CNN
2. 在每个感兴趣区域（RoI）进行一个二分类的语义分割

掩码分支是作用于每个RoI的小FCN，以像素到像素的方式预测分割掩码。

## RoIAlign

可是要在ROI区域进行一个mask分割，存在一个问题，Faster R-CNN不是为网络输入和输出之间的像素到像素对齐而设计的，如果直接拿Faster R-CNN得到的ROI进行mask分割，那么像素到像素的分割可能不精确，因为应用到目标检测上的核心操作执行的是粗略的空间量化特征提取，直接分割出来的mask存在错位的情况，所以作者提出了简单的，量化无关的层，称为RoIAlign(ROI对齐)，可以保留精确的空间位置，可以将掩码(mask)准确度提高10％至50％

## Loss

![image-20200827104752002](assets/Mask%20R-CNN/image-20200827104752002.png)

mask loss: KxMxM，每个像素应用sigmoid，然后使用二值交叉熵损失。仅在RoI的正样本上定义。