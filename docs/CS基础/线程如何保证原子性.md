原子性是指操作是不可分的。其表现在于对于共享变量的某些操作，应该是不可分的，必须连续完成。例如a++，对于共享变量a的操作，实际上会执行三个步骤，1.读取变量a的值  2.a的值+1  3.将值赋予变量a 。 这三个操作中任何一个操作过程中，a的值被人篡改，那么都会出现我们不希望出现的结果。所以我们必须保证这是原子性的。锁的机制解决了原子性的问题。



实际上线程安全还需要有序性和可见性来保证。



可见性是指一个线程对共享变量的修改，对于另一个线程来说是否是可以看到的。

为了加快执行的速度，线程一般是不会直接操作内存的，而是操作缓存。**如果一个操作执行的结果需要对另一个操作可见，那么这两个操作之间必须存在happens-before关系。**



有序性是指程序在执行的时候，程序的代码执行顺序和语句的顺序是一致的。

为什么会出现不一致的情况呢？这是由于重排序的缘故。